import type { ParentComponent } from "solid-js";
import { type RouteDefinition, Router } from "@solidjs/router";

import { baseurl } from "./config";

export default (
  App: ParentComponent,
  routes: Array<RouteDefinition>,
  ssrProps?: { url?: URL },
) => {
  if (ssrProps?.url) {
    return (
      <Router root={App} base={baseurl} url={ssrProps.url.pathname}>
        {routes}
      </Router>
    );
  }

  return (
    <Router root={App} base={baseurl}>
      {routes}
    </Router>
  );
};
