import { lazy } from "react";

type Params = Record<string, string | undefined>;

type ComponentModule = {
  loader?: (ctx: { params: Params }) => Promise<unknown>;
}
{{#each routes}}
const {{importName}} = lazy(() => import("{{importPathmap.page}}"));
{{/each}}

export const routes = [
  {{#each routes}}
  {
    name: "{{name}}",
    path: "{{path}}",
    Component: {{importName}},
    loader: async (ctx: { params: Params }) => {
      const module = await import("{{importPathmap.page}}") as ComponentModule;
      return module?.loader ? module.loader(ctx) : undefined;
    },
    {{#if meta}}
    handle: {{meta}},
    {{/if}}
  },
  {{/each}}
];

export const shouldHydrate = {{shouldHydrate}};
