import { hydrateRoot, createRoot } from "react-dom/client";

import { renderFactory, createRoutes } from "{{ createImport "libEntry" "client" }}";
import App from "{{ createImport "src" "App" }}";
import createRouter from "{{ createImport "src" "router" }}";

const root = document.getElementById("app");

if (root) {
  const routes = createRoutes({ withPreload: true });
  renderFactory(async () => {
    const router = await createRouter(App, routes);
    return {
      clientRender() {
        createRoot(root).render(router);
      },
      serverRender() {
        hydrateRoot(root, router);
      },
    }
  });
} else {
  console.error("Root element not found!");
}
