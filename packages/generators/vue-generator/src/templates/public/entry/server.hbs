import { createSSRApp } from "vue";
import { renderToString } from "vue/server-renderer";

import App from "../App.vue";
import createRouter from "../router";

const renderFactory: import("@kosmojs/dev").SSRFactory = async (url) => {
  return {
    async renderToString() {
      const app = createSSRApp(App);

      const router = await createRouter({ url });

      app.use(router);

      const html = await renderToString(app);

      return { html };
    },
  };
};

export default renderFactory;
