[
  [
    "default-project/esbuild.json",
    [
      "{",
      "  \"bundle\": true,",
      "  \"platform\": \"node\",",
      "  \"target\": \"node22\",",
      "  \"format\": \"esm\",",
      "  \"packages\": \"external\",",
      "  \"sourcemap\": \"linked\",",
      "  \"logLevel\": \"info\"",
      "}"
    ]
  ],
  [
    "default-project/package.json",
    [
      [
        "type",
        "module"
      ],
      [
        "distDir",
        "dist"
      ],
      [
        "scripts",
        {
          "dev": "kosmo dev",
          "build": "kosmo build",
          "+folder": "kosmo folder"
        }
      ],
      [
        "pnpm",
        {
          "onlyBuiltDependencies": [
            "esbuild"
          ]
        }
      ]
    ]
  ],
  [
    "default-project/tsconfig.json",
    [
      "{",
      "  \"extends\": \"@kosmojs/config/tsconfig.vite.json\"",
      "}"
    ]
  ],
  [
    "default-project/vite.base.ts",
    [
      "import { basename, resolve } from \"node:path\";",
      "",
      "import { aliasPlugin, definePlugin } from \"@kosmojs/dev\";",
      "import { loadEnv, mergeConfig, type UserConfig } from \"vite\";",
      "",
      "import pkg from \"./package.json\" with { type: \"json\" };",
      "",
      "const env = loadEnv(\"mock\", import.meta.dirname);",
      "",
      "export default (sourceFolderPath: string, config: UserConfig) => {",
      "  const sourceFolder = basename(sourceFolderPath);",
      "  return mergeConfig(config, {",
      "    build: {",
      "      outDir: resolve(import.meta.dirname, `${pkg.distDir}/${sourceFolder}`),",
      "      emptyOutDir: true,",
      "      sourcemap: true,",
      "    },",
      "",
      "    server: {",
      "      host: true,",
      "      allowedHosts: [env.VITE_HOSTNAME],",
      "      fs: {",
      "        strict: false,",
      "      },",
      "      watch: {",
      "        awaitWriteFinish: {",
      "          stabilityThreshold: 800,",
      "          pollInterval: 200,",
      "        },",
      "      },",
      "    },",
      "",
      "    cacheDir: resolve(import.meta.dirname, `var/.vite/${sourceFolder}`),",
      "",
      "    plugins: [",
      "      aliasPlugin(import.meta.dirname),",
      "      definePlugin([",
      "        {",
      "          // keys extracted from process.env and exposed to client",
      "          keys: [\"DEBUG\"],",
      "        },",
      "      ]),",
      "    ],",
      "  });",
      "};"
    ]
  ]
]